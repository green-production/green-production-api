(this["webpackJsonpgreen-production"]=this["webpackJsonpgreen-production"]||[]).push([[4],{116:function(e,t,n){"use strict";n.r(t);var r=n(31),a=n(13),i=n.n(a),s=n(2),o=n(16),c=n(5),d=n(6),l=n(9),u=n(8),h=n(1),p=n.n(h),f=n(18),g=n.n(f);function m(){return(m=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function v(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var b=function(e){var t,n;function r(){var t;return(t=e.call(this)||this).handleExpired=t.handleExpired.bind(v(t)),t.handleErrored=t.handleErrored.bind(v(t)),t.handleChange=t.handleChange.bind(v(t)),t.handleRecaptchaRef=t.handleRecaptchaRef.bind(v(t)),t}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var a=r.prototype;return a.getValue=function(){return this.props.grecaptcha&&void 0!==this._widgetId?this.props.grecaptcha.getResponse(this._widgetId):null},a.getWidgetId=function(){return this.props.grecaptcha&&void 0!==this._widgetId?this._widgetId:null},a.execute=function(){var e=this.props.grecaptcha;if(e&&void 0!==this._widgetId)return e.execute(this._widgetId);this._executeRequested=!0},a.executeAsync=function(){var e=this;return new Promise((function(t,n){e.executionResolve=t,e.executionReject=n,e.execute()}))},a.reset=function(){this.props.grecaptcha&&void 0!==this._widgetId&&this.props.grecaptcha.reset(this._widgetId)},a.handleExpired=function(){this.props.onExpired?this.props.onExpired():this.handleChange(null)},a.handleErrored=function(){this.props.onErrored&&this.props.onErrored(),this.executionReject&&(this.executionReject(),delete this.executionResolve,delete this.executionReject)},a.handleChange=function(e){this.props.onChange&&this.props.onChange(e),this.executionResolve&&(this.executionResolve(e),delete this.executionReject,delete this.executionResolve)},a.explicitRender=function(){if(this.props.grecaptcha&&this.props.grecaptcha.render&&void 0===this._widgetId){var e=document.createElement("div");this._widgetId=this.props.grecaptcha.render(e,{sitekey:this.props.sitekey,callback:this.handleChange,theme:this.props.theme,type:this.props.type,tabindex:this.props.tabindex,"expired-callback":this.handleExpired,"error-callback":this.handleErrored,size:this.props.size,stoken:this.props.stoken,hl:this.props.hl,badge:this.props.badge}),this.captcha.appendChild(e)}this._executeRequested&&this.props.grecaptcha&&void 0!==this._widgetId&&(this._executeRequested=!1,this.execute())},a.componentDidMount=function(){this.explicitRender()},a.componentDidUpdate=function(){this.explicitRender()},a.componentWillUnmount=function(){void 0!==this._widgetId&&(this.delayOfCaptchaIframeRemoving(),this.reset())},a.delayOfCaptchaIframeRemoving=function(){var e=document.createElement("div");for(document.body.appendChild(e),e.style.display="none";this.captcha.firstChild;)e.appendChild(this.captcha.firstChild);setTimeout((function(){document.body.removeChild(e)}),5e3)},a.handleRecaptchaRef=function(e){this.captcha=e},a.render=function(){var e=this.props,t=(e.sitekey,e.onChange,e.theme,e.type,e.tabindex,e.onExpired,e.onErrored,e.size,e.stoken,e.grecaptcha,e.badge,e.hl,function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,["sitekey","onChange","theme","type","tabindex","onExpired","onErrored","size","stoken","grecaptcha","badge","hl"]));return p.a.createElement("div",m({},t,{ref:this.handleRecaptchaRef}))},r}(p.a.Component);b.displayName="ReCAPTCHA",b.propTypes={sitekey:g.a.string.isRequired,onChange:g.a.func,grecaptcha:g.a.object,theme:g.a.oneOf(["dark","light"]),type:g.a.oneOf(["image","audio"]),tabindex:g.a.number,onExpired:g.a.func,onErrored:g.a.func,size:g.a.oneOf(["compact","normal","invisible"]),stoken:g.a.string,hl:g.a.string,badge:g.a.oneOf(["bottomright","bottomleft","inline"])},b.defaultProps={onChange:function(){},theme:"light",type:"image",tabindex:0,size:"normal",badge:"bottomright"};var j=n(42),y=n.n(j);function x(){return(x=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var O={},w=0;var _="onloadcallback";var R,S,L=(R=function(){return"https://"+(("undefined"!==typeof window&&window.recaptchaOptions||{}).useRecaptchaNet?"recaptcha.net":"www.google.com")+"/recaptcha/api.js?onload="+_+"&render=explicit"},S=(S={callbackName:_,globalName:"grecaptcha"})||{},function(e){var t=e.displayName||e.name||"Component",n=function(t){var n,r;function a(e,n){var r;return(r=t.call(this,e,n)||this).state={},r.__scriptURL="",r}r=t,(n=a).prototype=Object.create(r.prototype),n.prototype.constructor=n,n.__proto__=r;var i=a.prototype;return i.asyncScriptLoaderGetScriptLoaderID=function(){return this.__scriptLoaderID||(this.__scriptLoaderID="async-script-loader-"+w++),this.__scriptLoaderID},i.setupScriptURL=function(){return this.__scriptURL="function"===typeof R?R():R,this.__scriptURL},i.asyncScriptLoaderHandleLoad=function(e){var t=this;this.setState(e,(function(){return t.props.asyncScriptOnLoad&&t.props.asyncScriptOnLoad(t.state)}))},i.asyncScriptLoaderTriggerOnScriptLoaded=function(){var e=O[this.__scriptURL];if(!e||!e.loaded)throw new Error("Script is not loaded.");for(var t in e.observers)e.observers[t](e);delete window[S.callbackName]},i.componentDidMount=function(){var e=this,t=this.setupScriptURL(),n=this.asyncScriptLoaderGetScriptLoaderID(),r=S,a=r.globalName,i=r.callbackName,s=r.scriptId;if(a&&"undefined"!==typeof window[a]&&(O[t]={loaded:!0,observers:{}}),O[t]){var o=O[t];return o&&(o.loaded||o.errored)?void this.asyncScriptLoaderHandleLoad(o):void(o.observers[n]=function(t){return e.asyncScriptLoaderHandleLoad(t)})}var c={};c[n]=function(t){return e.asyncScriptLoaderHandleLoad(t)},O[t]={loaded:!1,observers:c};var d=document.createElement("script");for(var l in d.src=t,d.async=!0,S.attributes)d.setAttribute(l,S.attributes[l]);s&&(d.id=s);var u=function(e){if(O[t]){var n=O[t].observers;for(var r in n)e(n[r])&&delete n[r]}};i&&"undefined"!==typeof window&&(window[i]=function(){return e.asyncScriptLoaderTriggerOnScriptLoaded()}),d.onload=function(){var e=O[t];e&&(e.loaded=!0,u((function(t){return!i&&(t(e),!0)})))},d.onerror=function(){var e=O[t];e&&(e.errored=!0,u((function(t){return t(e),!0})))},document.body.appendChild(d)},i.componentWillUnmount=function(){var e=this.__scriptURL;if(!0===S.removeOnUnmount)for(var t=document.getElementsByTagName("script"),n=0;n<t.length;n+=1)t[n].src.indexOf(e)>-1&&t[n].parentNode&&t[n].parentNode.removeChild(t[n]);var r=O[e];r&&(delete r.observers[this.asyncScriptLoaderGetScriptLoaderID()],!0===S.removeOnUnmount&&delete O[e])},i.render=function(){var t=S.globalName,n=this.props,r=(n.asyncScriptOnLoad,n.forwardedRef),a=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(n,["asyncScriptOnLoad","forwardedRef"]);return t&&"undefined"!==typeof window&&(a[t]="undefined"!==typeof window[t]?window[t]:void 0),a.ref=r,Object(h.createElement)(e,a)},a}(h.Component),r=Object(h.forwardRef)((function(e,t){return Object(h.createElement)(n,x({},e,{forwardedRef:t}))}));return r.displayName="AsyncScriptLoader("+t+")",r.propTypes={asyncScriptOnLoad:g.a.func},y()(r,e)})(b),C=n(43),E=n.n(C),I=n(20),k=n(52),D=n(97),F=n(32),N=n(0),q=function(e){return Object(N.jsxs)("div",{className:"form-group",children:[Object(N.jsx)("label",{htmlFor:e.id}),Object(N.jsx)("input",{className:"form-control",type:e.type,name:e.name,value:e.value||"",id:e.id,placeholder:e.placeholder,onChange:e.onChange,required:e.required})]})},A=function(e){return Object(N.jsxs)("div",{className:"form-group",children:[Object(N.jsx)("label",{htmlFor:e.id}),Object(N.jsx)("select",{name:e.id,id:e.id,value:e.value,required:!0,onChange:e.changeFn,children:e.children})]})},T=(n(99),p.a.createRef()),U=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e){var r;return Object(c.a)(this,n),(r=t.call(this,e)).handleSubmit=function(){var e=Object(o.a)(i.a.mark((function e(t){var n,a,o,c,d,l,u,h,p;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),r.setState({isError:!1}),n=new FormData(t.target),a=Object.fromEntries(n.entries()),r.setState({formData:a}),delete a["g-recaptcha-response"],delete a.securityAnswer1,delete a.securityAnswer2,delete a.securityQuestion1,delete a.securityQuestion2,o=r.state.formData,c=o.securityAnswer1,d=o.securityAnswer2,l=o.securityQuestion1,u=o.securityQuestion2,h=r.state.isLogin?Object(s.a)({},a):Object(s.a)(Object(s.a)({},a),{},{secure_login_recovery:[{security_question_ID:l,secure_answer:c},{security_question_ID:u,secure_answer:d}]}),console.log("formData",r.state.formData,a),r.setState({pageLoading:!0}),e.prev=14,e.next=17,k.a[r.state.isLogin?"loginService":"signupService"](h);case 17:(p=e.sent)&&r.loginSuccess(p),e.next=25;break;case 21:e.prev=21,e.t0=e.catch(14),r.setState({isError:!0}),Object(D.a)(e.t0);case 25:r.setState({pageLoading:!1});case 26:case"end":return e.stop()}}),e,null,[[14,21]])})));return function(t){return e.apply(this,arguments)}}(),r.handleInputChange=function(e){var t=Object(s.a)({},r.state.formData);t[e.target.id]=e.target.value,r.setState({formData:t})},r.loginForm=function(){r.setState((function(e){return{isLogin:!e.isLogin}})),T.current.reset(),r.setState({captchaToken:null}),r.setState({isError:!1}),r.resetForm()},r.captchaChange=function(e){var t=T.current.getValue();r.setState({captchaToken:t}),r.setState({isError:!1})},r.successResponseGoogle=function(){var e=Object(o.a)(i.a.mark((function e(t){var n,a,s,o;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.setState({isError:!1}),n=t.getAuthResponse().id_token,a={user_name:t.profileObj.email},s={googletoken:n},r.setState({pageLoading:!0}),e.prev=5,e.next=8,k.a.loginService(a,s);case 8:(o=e.sent)&&r.loginSuccess(o,t),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(5),r.setState({isError:!0}),Object(D.a)(e.t0);case 16:r.setState({pageLoading:!1});case 17:case"end":return e.stop()}}),e,null,[[5,12]])})));return function(t){return e.apply(this,arguments)}}(),r.loginSuccess=function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",a=r.context,i=a.dispatch,s=a.jwtDispatch,o=a.userDispatch;i({type:"LOGIN-LOGOUT"}),s({type:"JWT-TOKEN",token:e.token}),delete e.token,e.imgUrl=null===n||void 0===n||null===(t=n.profileObj)||void 0===t?void 0:t.imageUrl,o({type:"USER-DETAILS",res:e}),r.props.history.push("/")},r.failureResponseGoogle=function(e){console.log(e)},r.state={pageLoading:!1,errorMsg:"Invalid username or password",isLogin:!0,isError:!1,captchaToken:null,formData:{dob:"",email:"",gender:"Select",full_name:"",password:"",passwordRepeat:"",securityAnswer1:"",securityAnswer2:"",securityQuestion1:"Select",securityQuestion2:"Select",user_name:""}},r}return Object(d.a)(n,[{key:"componentDidMount",value:function(){this.context.isAuthenticated&&this.props.history.push("/")}},{key:"resetForm",value:function(){var e=this.state.formData;for(var t in console.log(e,this.state),e)this.setState(Object(r.a)({},t,"")),e[t]="";this.setState({formData:e})}},{key:"render",value:function(){var e=this.state,t=e.isLogin,n=e.isError,r=e.errorMsg,a=e.pageLoading;return Object(N.jsxs)("div",{children:[a?Object(N.jsx)(F.a,{}):"",Object(N.jsxs)("div",{className:"signup__container",style:{height:t?"30rem":"33rem"},children:[Object(N.jsxs)("div",{className:"container__child signup__thumbnail",children:[Object(N.jsx)("div",{className:"thumbnail__content text-center",children:Object(N.jsx)("h3",{className:"heading--secondary",children:"Infinite growth of material consumption in a finite world is an impossibility."})}),Object(N.jsx)("div",{className:"signup__overlay"})]}),Object(N.jsxs)("div",{className:"container__child signup__form",children:[n&&Object(N.jsx)("div",{className:"error-message",style:{top:t?"7%":"0"},children:r}),Object(N.jsx)("div",{className:"formWrapper",children:Object(N.jsxs)("form",{onSubmit:this.handleSubmit,children:[this.state.isLogin?Object(N.jsxs)(p.a.Fragment,{children:[Object(N.jsx)(W,{id:"user_name",type:"text",value:this.state.formData.user_name,placeholder:"Enter your username/ email",changeFn:this.handleInputChange,isRequired:!0}),Object(N.jsx)(W,{id:"password",type:"password",value:this.state.formData.password,placeholder:"Enter password",changeFn:this.handleInputChange,isRequired:!0})]}):Object(N.jsxs)(p.a.Fragment,{children:[Object(N.jsx)(W,{id:"full_name",type:"text",value:this.state.formData.full_name,placeholder:"Enter your name",changeFn:this.handleInputChange,isRequired:!0}),Object(N.jsx)(W,{id:"user_name",type:"text",value:this.state.formData.user_name,placeholder:"Enter your username",changeFn:this.handleInputChange,isRequired:!0}),Object(N.jsx)(W,{id:"email",type:"text",value:this.state.formData.email,placeholder:"Enter your email",changeFn:this.handleInputChange,isRequired:!0}),Object(N.jsx)(W,{id:"password",type:"password",value:this.state.formData.password,placeholder:"Enter password",changeFn:this.handleInputChange,isRequired:!0}),Object(N.jsx)(W,{id:"passwordRepeat",type:"password",value:this.state.formData.passwordRepeat,placeholder:"Confirm password",changeFn:this.handleInputChange,isRequired:!0}),Object(N.jsx)(W,{id:"dob",type:"text",value:this.state.formData.dob,placeholder:"Date of Birth: DD/MM/YYYY",changeFn:this.handleInputChange,isRequired:!0}),Object(N.jsx)(G,{id:"gender",label:"Gender",value:this.state.formData.gender,changeFn:this.handleInputChange}),Object(N.jsx)(G,{id:"securityQuestion1",label:"Security question 1",value:this.state.formData.securityQuestion1,changeFn:this.handleInputChange}),Object(N.jsx)(W,{id:"securityAnswer1",type:"text",value:this.state.formData.securityAnswer1,placeholder:"Answer for question 1",changeFn:this.handleInputChange,isRequired:!0}),Object(N.jsx)(G,{id:"securityQuestion2",label:"Security question 2",value:this.state.formData.securityQuestion2,changeFn:this.handleInputChange}),Object(N.jsx)(W,{id:"securityAnswer2",type:"text",value:this.state.formData.securityAnswer2,placeholder:"Answer for question 2",changeFn:this.handleInputChange,isRequired:!0})]}),Object(N.jsx)("div",{className:"form-group captcha",children:Object(N.jsx)(L,{ref:T,sitekey:"6LdiHqYUAAAAAESfe6F91S3iRfkQ_i-fHW6GcVRz",onChange:this.captchaChange})}),Object(N.jsx)("div",{className:"m-t-lg",children:Object(N.jsx)("input",{className:"btn btn--form",type:"submit",disabled:!this.state.captchaToken,value:t?"Login":"Register"})}),t&&Object(N.jsx)("div",{className:"google-login",children:Object(N.jsx)(E.a,{clientId:"1066685436606-rs3sveemdvqhfm56hljf70cvs2n077ed.apps.googleusercontent.com",buttonText:"Login with Google",style:{transform:"scale(0.7)"},onSuccess:this.successResponseGoogle,onFailure:this.failureResponseGoogle})})]})}),Object(N.jsx)("button",{className:"signup__link",onClick:this.loginForm,children:t?"Register":"Login"})]})]})]})}}]),n}(h.Component);U.contextType=I.a;t.default=U;var W=function(e){return Object(N.jsx)(q,{type:e.type,name:e.id,value:e.value||"",id:e.id,placeholder:e.placeholder,onChange:e.changeFn,required:e.isRequired})},G=function(e){var t=e.label,n=e.id,r=e.value,a=e.changeFn;return Object(N.jsx)(A,{id:n,value:r,changeFn:a,children:"gender"===n?Object(N.jsx)(M,{label:t}):Object(N.jsx)(Q,{label:t})})},Q=function(e){var t=e.label;return Object(N.jsxs)(p.a.Fragment,{children:[Object(N.jsxs)("option",{value:"",default:!0,children:["Select ",t]}),Object(N.jsx)("option",{value:"1",children:"What is your mother's maiden name?"}),Object(N.jsx)("option",{value:"2",children:"What is the name of your first pet?"}),Object(N.jsx)("option",{value:"3",children:"What was your first car?"}),Object(N.jsx)("option",{value:"4",children:"What elementary school did you attend?"}),Object(N.jsx)("option",{value:"5",children:"What is the name of the road you grew up on?"}),Object(N.jsx)("option",{value:"6",children:"Where did you meet your spouse?"}),Object(N.jsx)("option",{value:"7",children:"What's your best friend's name?"}),Object(N.jsx)("option",{value:"8",children:"Where did you go to high school/college?"}),Object(N.jsx)("option",{value:"9",children:"Who was your childhood hero?"}),Object(N.jsx)("option",{value:"10",children:"What is your favorite food?"})]})},M=function(e){var t=e.label;return Object(N.jsxs)(p.a.Fragment,{children:[Object(N.jsxs)("option",{value:"",default:!0,children:["Select ",t]}),Object(N.jsx)("option",{value:"F",children:"Female"}),Object(N.jsx)("option",{value:"M",children:"Male"}),Object(N.jsx)("option",{value:"O",children:"Other"})]})}},97:function(e,t,n){"use strict";t.a=function(e){var t=e.message||e.error||e;t||(t="Some error occurred. Please try again."),(0,console.error)(t)}},99:function(e,t,n){}}]);
//# sourceMappingURL=4.926d4d85.chunk.js.map